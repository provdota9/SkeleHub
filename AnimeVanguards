local fpsBoostConnection = nil
local FpsBoostOldValue = {}

local function fpsBoostFunc(enabled)
	if enabled then
		for _, v in pairs(workspace:GetDescendants()) do
			if v:IsA('ParticleEmitter') or v:IsA('Beam') or v:IsA('SurfaceGui') or v:IsA('BillboardGui') then
				FpsBoostOldValue[v] = v.Enabled
				v.Enabled = false
			elseif v:IsA('Texture') then
				FpsBoostOldValue[v] = v.Texture
				v.Texture = ''
			elseif v:IsA('Part') then
				FpsBoostOldValue[v] = v.Material
				v.Material = Enum.Material.Plastic
			elseif v:IsA('MeshPart') then
				FpsBoostOldValue[v] = v.MeshId
				v.MeshId = ''
			end
		end
		fpsBoostConnection = game.DescendantAdded:Connect(function(descendant)
			if descendant:IsA('ParticleEmitter') or descendant:IsA('Beam') or descendant:IsA('SurfaceGui') or descendant:IsA('BillboardGui') then
				FpsBoostOldValue[descendant] = descendant.Enabled
				descendant.Enabled = false
			elseif descendant:IsA('Texture') then
				FpsBoostOldValue[descendant] = descendant.Texture
				descendant.Texture = ''
			elseif descendant:IsA('Part') then
				FpsBoostOldValue[descendant] = descendant.Material
				descendant.Material = Enum.Material.Plastic
			elseif descendant:IsA('MeshPart') then
				FpsBoostOldValue[descendant] = descendant.MeshId
				descendant.MeshId = ''
			end
		end)
	else
		fpsBoostConnection:Disconnect()
		for _, v in pairs(game:GetDescendants()) do
			if v:IsA('Texture') then
				v.Texture = FpsBoostOldValue[v]
				FpsBoostOldValue[v] = nil
			elseif v:IsA('ParticleEmitter') or v:IsA('Beam') or v:IsA('SurfaceGui') or v:IsA('BillboardGui') then
				v.Enabled = FpsBoostOldValue[v]
				FpsBoostOldValue[v] = nil
			elseif v:IsA('Part') then
				v.Material = Enum.Material[FpsBoostOldValue[v]]
				FpsBoostOldValue[v] = nil
			elseif v:IsA('MeshPart') then
				v.MeshId = FpsBoostOldValue[v]
				FpsBoostOldValue[v] = nil
			end
		end
	end
end
